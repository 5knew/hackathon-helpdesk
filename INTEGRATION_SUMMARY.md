# –†–µ–∑—é–º–µ –∞–Ω–∞–ª–∏–∑–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Backend ‚Üî ML

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ê–Ω–∞–ª–∏–∑ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- –ò–∑—É—á–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –í—ã—è–≤–ª–µ–Ω—ã –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –∑–Ω–∞—á–µ–Ω–∏–π

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### `backend/services/ai_classifier.py`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ `/predict` (—Ç–µ–ø–µ—Ä—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç `app.py`)
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏ —Ç–∏–ø–æ–≤ –ø—Ä–æ–±–ª–µ–º —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### `backend/services/auto_resolver.py`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ (`response_text` –≤–º–µ—Å—Ç–æ `reply`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –º–∞–ø–ø–∏–Ω–≥ `IssueType` enum ‚Üí —Ä—É—Å—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª—è ML —Å–µ—Ä–≤–∏—Å–∞

### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞–Ω `INTEGRATION_ANALYSIS.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –°–æ–∑–¥–∞–Ω `INTEGRATION_FIXES.md` - –æ–ø–∏—Å–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `ml/start_ml_service.sh` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ ML —Å–µ—Ä–≤–∏—Å–∞

## üìã –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### –†–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
- ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–∏–∫–µ—Ç–æ–≤ (–∫–∞—Ç–µ–≥–æ—Ä–∏—è, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã)
- ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ –∑–Ω–∞—á–µ–Ω–∏–π –º–µ–∂–¥—É backend –∏ ML —Å–µ—Ä–≤–∏—Å–æ–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Ç–∏–ø–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å fallback –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

### –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- **ML —Å–µ—Ä–≤–∏—Å**: `ml/app.py` (–ø–æ—Ä—Ç 8000)
- **Backend**: `backend/main.py` (–ø–æ—Ä—Ç 8002)
- **–°–≤—è–∑—å**: HTTP –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `ML_SERVICE_URL`

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –ó–∞–ø—É—Å–∫ ML —Å–µ—Ä–≤–∏—Å–∞
```bash
cd ml
python app.py
# –∏–ª–∏
./start_ml_service.sh
```

### 2. –ó–∞–ø—É—Å–∫ Backend
```bash
cd backend
export ML_SERVICE_URL=http://localhost:8000
python run.py
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ ML —Å–µ—Ä–≤–∏—Å–∞
curl http://localhost:8000/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Backend
curl http://localhost:8002/health
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–ü–æ—Ä—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã**: 8000 (ML) –∏ 8002 (Backend)
2. **–ú–æ–¥–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—É—á–µ–Ω—ã** –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º ML —Å–µ—Ä–≤–∏—Å–∞
3. **–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è** `ML_SERVICE_URL` –¥–æ–ª–∂–Ω–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ ML —Å–µ—Ä–≤–∏—Å
4. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `app.py`**, –∞ –Ω–µ `api.py` (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å `api.py` –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω)

## üìä –§–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

### –ó–∞–ø—Ä–æ—Å –∫ `/predict`:
```json
{
  "text": "–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Ç–∏–∫–µ—Ç–∞",
  "subject": "–¢–µ–º–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)"
}
```

### –û—Ç–≤–µ—Ç –æ—Ç `/predict`:
```json
{
  "category": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞",
  "priority": "–°—Ä–µ–¥–Ω–∏–π",
  "problem_type": "–¢–∏–ø–æ–≤–æ–π",
  "confidence": {
    "category": 0.85,
    "priority": 0.78,
    "problem_type": 0.92
  }
}
```

### –ó–∞–ø—Ä–æ—Å –∫ `/auto_reply`:
```json
{
  "text": "–¢–µ–∫—Å—Ç —Ç–∏–∫–µ—Ç–∞",
  "category": "–û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã",
  "problem_type": "–¢–∏–ø–æ–≤–æ–π",
  "language": "ru"
}
```

### –û—Ç–≤–µ—Ç –æ—Ç `/auto_reply`:
```json
{
  "can_auto_reply": true,
  "response_text": "–¢–µ–∫—Å—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞",
  "response_id": "id_—à–∞–±–ª–æ–Ω–∞",
  "similarity": 0.87
}
```

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–∞—Ö:
- `INTEGRATION_ANALYSIS.md` - –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º
- `INTEGRATION_FIXES.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

