# üîê –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

## üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Endpoint:** `POST /auth/register`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "email": "user@example.com",
  "password": "secure_password123",
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "phone": "+7 777 123 4567",
  "position": "–ú–µ–Ω–µ–¥–∂–µ—Ä",
  "role": "client"
}
```

**–û—Ç–≤–µ—Ç (201):**
```json
{
  "id": "uuid",
  "email": "user@example.com",
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "phone": "+7 777 123 4567",
  "position": "–ú–µ–Ω–µ–¥–∂–µ—Ä",
  "role": "client",
  "created_at": "2025-12-05T..."
}
```

**–û—à–∏–±–∫–∏:**
- `400` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç

---

### 2. –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Endpoint:** `POST /auth/login`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "email": "user@example.com",
  "password": "secure_password123"
}
```

**–û—Ç–≤–µ—Ç (200):**
```json
{
  "access_token": "token_string",
  "token_type": "bearer",
  "user_id": "uuid",
  "email": "user@example.com",
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "role": "client"
}
```

**–û—à–∏–±–∫–∏:**
- `401` - –ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å

---

### 3. –í—Ö–æ–¥ —á–µ—Ä–µ–∑ OAuth2 —Ñ–æ—Ä–º—É (–¥–ª—è Swagger)

**Endpoint:** `POST /auth/login/form`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Ö–æ–¥ —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é OAuth2 —Ñ–æ—Ä–º—É (—É–¥–æ–±–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ Swagger UI)

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–æ—Ä–º—ã:**
- `username` - email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `password` - –ø–∞—Ä–æ–ª—å

**–û—Ç–≤–µ—Ç:** –ê–Ω–∞–ª–æ–≥–∏—á–µ–Ω `/auth/login`

---

### 4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**Endpoint:** `GET /auth/me`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Authorization: Bearer {access_token}
```

**–û—Ç–≤–µ—Ç (200):**
```json
{
  "id": "uuid",
  "email": "user@example.com",
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "phone": "+7 777 123 4567",
  "position": "–ú–µ–Ω–µ–¥–∂–µ—Ä",
  "role": "client",
  "created_at": "2025-12-05T..."
}
```

**–û—à–∏–±–∫–∏:**
- `401` - –ù–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
- `404` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω

---

### 5. –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**Endpoint:** `POST /auth/logout`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞)

**–ó–∞–≥–æ–ª–æ–≤–∫–∏:**
```
Authorization: Bearer {access_token}
```

**–û—Ç–≤–µ—Ç (200):**
```json
{
  "message": "–£—Å–ø–µ—à–Ω—ã–π –≤—ã—Ö–æ–¥"
}
```

---

## üîë –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ `access_token`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization` –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

```
Authorization: Bearer {access_token}
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
```bash
curl -X POST "http://localhost:8002/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123",
    "name": "–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
    "role": "client"
  }'
```

### –í—Ö–æ–¥
```bash
curl -X POST "http://localhost:8002/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123"
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–µ–±–µ
```bash
curl -X GET "http://localhost:8002/auth/me" \
  -H "Authorization: Bearer {access_token}"
```

### –í—ã—Ö–æ–¥
```bash
curl -X POST "http://localhost:8002/auth/logout" \
  -H "Authorization: Bearer {access_token}"
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é SHA-256
- –¢–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Redis –∏–ª–∏ JWT)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `bcrypt` –∏–ª–∏ `argon2` –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JWT —Ç–æ–∫–µ–Ω—ã —Å –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
- –î–æ–±–∞–≤–∏—Ç—å refresh tokens
- –•—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –≤ Redis
- –î–æ–±–∞–≤–∏—Ç—å rate limiting

---

## üìä –°—Ç–∞—Ç—É—Å —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

| Endpoint | –ú–µ—Ç–æ–¥ | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|--------|----------|
| `/auth/register` | POST | ‚úÖ | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è |
| `/auth/login` | POST | ‚úÖ | –í—Ö–æ–¥ |
| `/auth/login/form` | POST | ‚úÖ | –í—Ö–æ–¥ (OAuth2 —Ñ–æ—Ä–º–∞) |
| `/auth/me` | GET | ‚úÖ | –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| `/auth/logout` | POST | ‚úÖ | –í—ã—Ö–æ–¥ |

---

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞:** 2025-12-05  
**–í–µ—Ä—Å–∏—è API:** 2.0.0

